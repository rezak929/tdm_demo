tags: Generators,Masking
stages:
  Get LuName:
    actors:
      GetLuName:
        parent: GetLuName
  Get Scope:
    actors:
      ErrorHandler:
        parent: ErrorHandler
        error: result
        in:
          config:
            const:
            - exceptionKey: java.lang.Exception
              conditions:
                message: ''
              actions:
                suppress: true
                log: false
                flowName: ''
                number_of_retries: ''
                retry_interval: ''
      Execution_id:
        parent: FabricSetRead
        in:
          key:
            const: execution_id
            default: false
      Get IID:
        parent: DbFetchField
        height: 321
        in:
          interface:
            const: fabric
          sql:
            const: select iid ('${@luName}')
          luName:
            link: GetLuName/luType
            schema: string
            mandatory: false
        out:
          result:
            schema: string
  Set Seed:
    dependsOn: Get Scope
    actors:
      Scope Doesnt Exist:
        parent: Equals
        condition: result
        in:
          b:
            const: true
            schema: boolean
          a:
            link: ErrorHandler/result
      Seed 2:
        parent: MapCreate
        in:
          Execution_Id:
            link: Execution_id/result
            schema: string
            mandatory: false
        out:
          map:
            external: Seed
            schema: '#ref'
    split: '--------------------'
  Scope Exists:
    else: true
    dependsOn: Get Scope
    actors:
      Seed:
        parent: MapCreate
        in:
          Scope:
            link: Get IID/result
            schema: string
            mandatory: false
          Execution_Id:
            link: Execution_id/result
            schema: string
            mandatory: false
        out:
          map:
            external: Seed
            schema: '#ref'
schemas:
  Seed 2.out.map:
    type: object
    properties:
      Execution_Id:
        type: string
  Seed.out.map:
    type: object
    properties:
      Scope: {
        }
      Execution_Id:
        type: string
